<section
  class="text-white py-28 px-6 bg-gradient-to-b from-black/20 to-gray-900 min-h-screen"
>
  <div class="max-w-6xl mx-auto text-center">
    <h2 class="text-4xl font-extrabold text-blue-400 mb-6">
      Guitar Chord Library
    </h2>
    <p class="text-lg text-white mb-12 max-w-3xl mx-auto leading-relaxed">
      Discover a comprehensive collection of essential guitar chords, complete
      with clear diagrams, finger placement tips, and playing techniques to
      elevate your guitar skills.
    </p>

    <div
      class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8"
    >
      <div
        *ngFor="let chord of chords; let i = index"
        class="bg-zinc-900 border border-gray-700 rounded-2xl p-6 shadow-md hover:shadow-lg transition-transform hover:-translate-y-1 flex flex-col items-center text-left"
      >
        <h3 class="text-xl font-semibold text-blue-300 mb-3 text-center w-full">
          {{ chord.name }}
        </h3>

        <img
          [src]="chord.imagePath"
          [alt]="chord.name + ' chord diagram'"
          class="mb-4 max-w-full h-36 object-contain rounded-md bg-gray-800 p-2"
          loading="lazy"
        />

        <p class="text-sm text-gray-300 mb-5 text-center">
          {{ chord.description }}
        </p>

        <!-- Audio Section -->
        <div class="w-full">
          <p
            class="text-center text-base font-semibold text-blue-400 mb-3 tracking-wide uppercase"
          >
            Listen to the chord
          </p>

          <!-- Native Audio Element (Hidden) -->
          <audio
            #audioRef
            [src]="chord.audioPath"
            (timeupdate)="onTimeUpdate(audioRef, i)"
            class="hidden"
          ></audio>

          <!-- Custom Player -->
          <div
            class="w-full px-3 py-2 bg-gray-800/40 rounded-xl border border-gray-700 flex items-center gap-4 shadow-inner"
          >
            <!-- Play Button -->
            <button
              (click)="togglePlay(audioRef, i)"
              class="w-10 h-10 flex items-center justify-center bg-blue-500 hover:bg-blue-600 text-white rounded-full border border-blue-300 shadow transition"
              [attr.aria-label]="isPlaying[i] ? 'Pause' : 'Play'"
            >
              <svg
                *ngIf="!isPlaying[i]"
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path d="M8 5v14l11-7z" />
              </svg>
              <svg
                *ngIf="isPlaying[i]"
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
              </svg>
            </button>

            <!-- Progress Bar -->
            <div
              class="flex-1 h-2 bg-gray-600/60 rounded-full overflow-hidden relative"
            >
              <div
                class="absolute top-0 left-0 h-full bg-blue-400 transition-all duration-100 ease-linear"
                [style.width.%]="progress[i]"
              ></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
